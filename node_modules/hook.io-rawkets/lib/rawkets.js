var Hook = require("hook.io").Hook,
	util = require("util"),
	RawketsServer = require("hook.io-rawkets-server").RawketsServer;
	RawketsClient = require("hook.io-rawkets-client").RawketsClient;

var Rawkets = exports.Rawkets = function(options){
	Hook.call(this, options);
	var self = this;

	self.on("hook::ready", function() {
		// Listen for hooks spawned from within this hook
		self.listen();
		
		// Start the game client
		self.spawn([{
			type: "rawkets-client",
			name: "rawkets-client",
			silent: 1
		}]);
	});

	// Will only run once because duplicate rawkets-client hooks will
	// have a different name or an instance number at the end
	self.on("rawkets-client::hook::ready", function() {
		self.spawn([{
			type: "rawkets-server",
			name: "rawkets-server",
			silent: 1
		}]);
	});
};

// Rawkets inherits from Hook
util.inherits(Rawkets, Hook);