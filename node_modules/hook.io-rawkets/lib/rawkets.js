var Hook = require("hook.io").Hook,
	util = require("util"),
	RawketsWorld = require("hook.io-rawkets-world").RawketsWorld;
	RawketsClient = require("hook.io-rawkets-client").RawketsClient;

var Rawkets = exports.Rawkets = function(options){
	Hook.call(this, options);
	var self = this;

	self.on("hook::ready", function() {
		// Listen for hooks spawned from within this hook
		self.listen();
		
		// Start the game world
		self.spawn([{
			type: "rawkets-world",
			name: "rawkets-world",
			silent: 1
		}]);
	});

	// Will only run once because duplicate rawkets-world hooks will
	// have a different name or an instance number at the end
	self.on("rawkets-world::hook::ready", function() {
		// Start serving client-side assets
		self.spawn([{
			type: "rawkets-client",
			name: "rawkets-client",
			silent: 1
		}]);
	});
};

// Rawkets inherits from Hook
util.inherits(Rawkets, Hook);